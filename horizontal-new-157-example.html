
<!doctype html>
<html>
<head>
  <title>Network | Images</title>

  <style type="text/css">
    html, body {
      height: 100%;
    }
    #mynetwork {
      width: 100%;
      height: 100%;
      border: 1px solid lightgray;
    }
  </style>

  <script src="jquery.min.js"></script>
  <script type="text/javascript" src="vis.js"></script>
  <link href="vis.css" rel="stylesheet" type="text/css" />

  <script type="text/javascript">

  var json = {"msec":4101,"count":1,"data":[{"nodes":[{"node_id":70354,"node_type":{"node_type_id":2,"node_type":"multicast_group"},"service":{"service_id":157,"service_name":"National Geographic Wild HD"},"multicast_group":{"multicast_group_id":31543,"multicast":"239.195.0.196","source":"24.164.223.229","port":2196,"encoded_master":true,"ip_net":{"ip_net_id":1,"ip_net_name":"NVT"}}},{"node_id":70933,"node_type":{"node_type_id":1,"node_type":"device"},"service":{"service_id":157,"service_name":"National Geographic Wild HD"},"device":{"device_id":44,"device_name":"P2-604-03","vendor_model":{"vendor_model_id":1,"vendor_model":"4Caster","vendor_model_desc":"Live Video Encoder","device_code":{"device_code_id":null,"device_code":null},"vendor":{"vendor_id":2,"vendor_name":"Envivio"}},"device_roles":[{"device_role_id":14,"device_role":"Encoder"}],"location":{"rack":"04","rack_elevation":"03","row":"6","pod":"2","site":{"site_id":82,"site_name":"Peakview - Deprecated entry see ENWDCOCD","clli_code":"DNVRCODC","address":"11011 E Peakview Ave","city":"Centennial","state":"CO","zip_code":"80111","lat":"39.598966","lng":"-104.8601149","market":"TNO"}}}},{"node_id":74933,"node_type":{"node_type_id":1,"node_type":"device"},"service":{"service_id":157,"service_name":"National Geographic Wild HD"},"device":{"device_id":2016,"device_name":"dnvrco01-hp-jtp0017","vendor_model":{"vendor_model_id":99,"vendor_model":"Halo","vendor_model_desc":"Halo Live and JITP Packagers","device_code":{"device_code_id":null,"device_code":null},"vendor":{"vendor_id":2,"vendor_name":"Envivio"}},"device_roles":[{"device_role_id":76,"device_role":"Packager"}],"location":{"rack":"04","rack_elevation":"09","row":"G","pod":"3","site":{"site_id":1,"site_name":"Peakview","clli_code":"PKVWCO","address":"11011 E Peakview Ave","city":"Centennial","state":"CO","zip_code":"80111","lat":"39.5792","lng":"-104.8769","market":"TNO"}}}},{"node_id":74990,"node_type":{"node_type_id":1,"node_type":"device"},"service":{"service_id":157,"service_name":"National Geographic Wild HD"},"device":{"device_id":2017,"device_name":"dnvrco01-hp-jtp0018","vendor_model":{"vendor_model_id":99,"vendor_model":"Halo","vendor_model_desc":"Halo Live and JITP Packagers","device_code":{"device_code_id":null,"device_code":null},"vendor":{"vendor_id":2,"vendor_name":"Envivio"}},"device_roles":[{"device_role_id":76,"device_role":"Packager"}],"location":{"rack":"05","rack_elevation":"09","row":"G","pod":"3","site":{"site_id":1,"site_name":"Peakview","clli_code":"PKVWCO","address":"11011 E Peakview Ave","city":"Centennial","state":"CO","zip_code":"80111","lat":"39.5792","lng":"-104.8769","market":"TNO"}}}},{"node_id":76258,"node_type":{"node_type_id":1,"node_type":"device"},"service":{"service_id":157,"service_name":"National Geographic Wild HD"},"device":{"device_id":6448,"device_name":"enwdcocd-ci-dsa-0006","vendor_model":{"vendor_model_id":331,"vendor_model":"DCM9902","vendor_model_desc":"DCM9902","device_code":{"device_code_id":1,"device_code":"dcm"},"vendor":{"vendor_id":1,"vendor_name":"Cisco"}},"device_roles":[{"device_role_id":67,"device_role":"Source Selection"}],"location":{"rack":"","rack_elevation":"","row":"","pod":"","site":{"site_id":3418,"site_name":"NDC West","clli_code":"ENWDCOCD","address":"11011 E Peakview Ave","city":"Centennial","state":"CO","zip_code":"80111","lat":"39.598976","lng":"-104.860134","market":"TNO"}}}},{"node_id":77137,"node_type":{"node_type_id":1,"node_type":"device"},"service":{"service_id":157,"service_name":"National Geographic Wild HD"},"device":{"device_id":23462,"device_name":"SAN see notes below","vendor_model":{"vendor_model_id":124,"vendor_model":"DSR-4410MD","vendor_model_desc":"DSR-4410MD","device_code":{"device_code_id":null,"device_code":null},"vendor":{"vendor_id":6,"vendor_name":"Motorola"}},"device_roles":[{"device_role_id":3,"device_role":"IRD"}],"location":{"rack":"","rack_elevation":"","row":"","pod":"","site":{"site_id":82,"site_name":"Peakview - Deprecated entry see ENWDCOCD","clli_code":"DNVRCODC","address":"11011 E Peakview Ave","city":"Centennial","state":"CO","zip_code":"80111","lat":"39.598966","lng":"-104.8601149","market":"TNO"}}}},{"node_id":78501,"node_type":{"node_type_id":1,"node_type":"device"},"service":{"service_id":157,"service_name":"National Geographic Wild HD"},"device":{"device_id":24981,"device_name":"LSANCAEG-ER-ENC0002","vendor_model":{"vendor_model_id":354,"vendor_model":"AVP2000","vendor_model_desc":"Mezzanine Transport Encoder","device_code":{"device_code_id":null,"device_code":null},"vendor":{"vendor_id":5,"vendor_name":"Ericsson"}},"device_roles":[{"device_role_id":14,"device_role":"Encoder"}],"location":{"rack":null,"rack_elevation":null,"row":null,"pod":null,"site":{"site_id":3596,"site_name":"FOX PICO","clli_code":"LSANCAEG","address":"10201 West Pico Blvd.","city":"Los Angeles","state":"CA","zip_code":"90064","lat":null,"lng":null,"market":"TNO"}}}},{"node_id":78508,"node_type":{"node_type_id":1,"node_type":"device"},"service":{"service_id":157,"service_name":"National Geographic Wild HD"},"device":{"device_id":24995,"device_name":"LSANCAEG-ER-ENC0006","vendor_model":{"vendor_model_id":354,"vendor_model":"AVP2000","vendor_model_desc":"Mezzanine Transport Encoder","device_code":{"device_code_id":null,"device_code":null},"vendor":{"vendor_id":5,"vendor_name":"Ericsson"}},"device_roles":[{"device_role_id":14,"device_role":"Encoder"}],"location":{"rack":null,"rack_elevation":null,"row":null,"pod":null,"site":{"site_id":3596,"site_name":"FOX PICO","clli_code":"LSANCAEG","address":"10201 West Pico Blvd.","city":"Los Angeles","state":"CA","zip_code":"90064","lat":null,"lng":null,"market":"TNO"}}}},{"node_id":78764,"node_type":{"node_type_id":1,"node_type":"device"},"service":{"service_id":157,"service_name":"National Geographic Wild HD"},"device":{"device_id":25608,"device_name":"Electra8240-16","vendor_model":{"vendor_model_id":70,"vendor_model":"Electra 8240","vendor_model_desc":"Electra 8240","device_code":{"device_code_id":null,"device_code":null},"vendor":{"vendor_id":4,"vendor_name":"Harmonic"}},"device_roles":[],"location":{"rack":"1","rack_elevation":"20","row":"5","pod":"DH2","site":{"site_id":3418,"site_name":"NDC West","clli_code":"ENWDCOCD","address":"11011 E Peakview Ave","city":"Centennial","state":"CO","zip_code":"80111","lat":"39.598976","lng":"-104.860134","market":"TNO"}}}},{"node_id":79662,"node_type":{"node_type_id":2,"node_type":"multicast_group"},"service":{"service_id":157,"service_name":"National Geographic Wild HD"},"multicast_group":{"multicast_group_id":37997,"multicast":"239.195.0.196","source":"69.76.85.135","port":12000,"encoded_master":false,"ip_net":{"ip_net_id":2,"ip_net_name":"Peakview"}}},{"node_id":81446,"node_type":{"node_type_id":2,"node_type":"multicast_group"},"service":{"service_id":157,"service_name":"National Geographic Wild HD"},"multicast_group":{"multicast_group_id":38504,"multicast":"239.195.83.75","source":"69.76.86.112","port":12000,"encoded_master":false,"ip_net":{"ip_net_id":2,"ip_net_name":"Peakview"}}},{"node_id":81738,"node_type":{"node_type_id":2,"node_type":"multicast_group"},"service":{"service_id":157,"service_name":"National Geographic Wild HD"},"multicast_group":{"multicast_group_id":35114,"multicast":"239.194.18.181","source":"69.76.86.113","port":12000,"encoded_master":false,"ip_net":{"ip_net_id":2,"ip_net_name":"Peakview"}}},{"node_id":81739,"node_type":{"node_type_id":2,"node_type":"multicast_group"},"service":{"service_id":157,"service_name":"National Geographic Wild HD"},"multicast_group":{"multicast_group_id":37266,"multicast":"239.194.18.181","source":"69.76.86.112","port":12000,"encoded_master":false,"ip_net":{"ip_net_id":2,"ip_net_name":"Peakview"}}},{"node_id":82872,"node_type":{"node_type_id":2,"node_type":"multicast_group"},"service":{"service_id":157,"service_name":"National Geographic Wild HD"},"multicast_group":{"multicast_group_id":35096,"multicast":"239.195.0.240","source":"24.24.90.3","port":12000,"encoded_master":false,"ip_net":{"ip_net_id":3,"ip_net_name":"Charlotte"}}},{"node_id":82916,"node_type":{"node_type_id":2,"node_type":"multicast_group"},"service":{"service_id":157,"service_name":"National Geographic Wild HD"},"multicast_group":{"multicast_group_id":36732,"multicast":"239.195.0.196","source":"69.76.105.7","port":12000,"encoded_master":false,"ip_net":{"ip_net_id":2,"ip_net_name":"Peakview"}}},{"node_id":84447,"node_type":{"node_type_id":2,"node_type":"multicast_group"},"service":{"service_id":157,"service_name":"National Geographic Wild HD"},"multicast_group":{"multicast_group_id":33313,"multicast":"239.195.0.196","source":"24.24.90.9","port":12000,"encoded_master":false,"ip_net":{"ip_net_id":3,"ip_net_name":"Charlotte"}}},{"node_id":85166,"node_type":{"node_type_id":2,"node_type":"multicast_group"},"service":{"service_id":157,"service_name":"National Geographic Wild HD"},"multicast_group":{"multicast_group_id":38094,"multicast":"239.195.83.75","source":"69.76.96.4","port":12000,"encoded_master":false,"ip_net":{"ip_net_id":2,"ip_net_name":"Peakview"}}},{"node_id":85994,"node_type":{"node_type_id":2,"node_type":"multicast_group"},"service":{"service_id":157,"service_name":"National Geographic Wild HD"},"multicast_group":{"multicast_group_id":34350,"multicast":"239.195.7.35","source":"107.14.224.14","port":12000,"encoded_master":false,"ip_net":{"ip_net_id":1,"ip_net_name":"NVT"}}},{"node_id":86002,"node_type":{"node_type_id":2,"node_type":"multicast_group"},"service":{"service_id":157,"service_name":"National Geographic Wild HD"},"multicast_group":{"multicast_group_id":37743,"multicast":"239.195.7.27","source":"107.14.224.1","port":12000,"encoded_master":false,"ip_net":{"ip_net_id":1,"ip_net_name":"NVT"}}}],"links":[{"link_id":59904,"cost":40,"src_node_id":70933,"dst_node_id":81446,"status":"active","src_port":null,"dst_port":null,"detail":{"compression":"MPEG2","definition":"HD","bitrate":null,"program_id":1,"sdt_name":null,"compression":{"compression":"MPEG2","description":"MPEG2"},"definition":{"definition":"HD","description":"High Definition"},"ts_type":null},"routing_type":{"routing_type_id":1,"routing_type":"Multicast"}},{"link_id":59905,"cost":510,"src_node_id":70933,"dst_node_id":81738,"status":"active","src_port":null,"dst_port":null,"detail":{"compression":"MPEG2","definition":"HD","bitrate":null,"program_id":1,"sdt_name":null,"compression":{"compression":"MPEG2","description":"MPEG2"},"definition":{"definition":"HD","description":"High Definition"},"ts_type":null},"routing_type":{"routing_type_id":1,"routing_type":"Multicast"}},{"link_id":59906,"cost":500,"src_node_id":70933,"dst_node_id":81739,"status":"active","src_port":null,"dst_port":null,"detail":{"compression":"MPEG2","definition":"HD","bitrate":null,"program_id":1,"sdt_name":null,"compression":{"compression":"MPEG2","description":"MPEG2"},"definition":{"definition":"HD","description":"High Definition"},"ts_type":null},"routing_type":{"routing_type_id":1,"routing_type":"Multicast"}},{"link_id":64892,"cost":30,"src_node_id":76258,"dst_node_id":85166,"status":"active","src_port":null,"dst_port":null,"detail":{"compression":"MPEG2","definition":"HD","bitrate":null,"program_id":1,"sdt_name":null,"compression":{"compression":"MPEG2","description":"MPEG2"},"definition":{"definition":"HD","description":"High Definition"},"ts_type":null},"routing_type":{"routing_type_id":1,"routing_type":"Multicast"}},{"link_id":65846,"cost":900,"src_node_id":78501,"dst_node_id":86002,"status":"active","src_port":null,"dst_port":null,"detail":{"compression":"MPEG2","definition":"HD","bitrate":null,"program_id":1,"sdt_name":null,"compression":{"compression":"MPEG2","description":"MPEG2"},"definition":{"definition":"HD","description":"High Definition"},"ts_type":null},"routing_type":{"routing_type_id":1,"routing_type":"Multicast"}},{"link_id":65853,"cost":900,"src_node_id":78508,"dst_node_id":85994,"status":"active","src_port":null,"dst_port":null,"detail":{"compression":"MPEG2","definition":"HD","bitrate":null,"program_id":1,"sdt_name":null,"compression":{"compression":"MPEG2","description":"MPEG2"},"definition":{"definition":"HD","description":"High Definition"},"ts_type":null},"routing_type":{"routing_type_id":1,"routing_type":"Multicast"}},{"link_id":66065,"cost":980,"src_node_id":78764,"dst_node_id":79662,"status":"active","src_port":null,"dst_port":null,"detail":{"compression":"MPEG2","definition":"HD","bitrate":null,"program_id":1,"sdt_name":null,"compression":{"compression":"MPEG2","description":"MPEG2"},"definition":{"definition":"HD","description":"High Definition"},"ts_type":null},"routing_type":{"routing_type_id":1,"routing_type":"Multicast"}},{"link_id":66848,"cost":510,"src_node_id":81738,"dst_node_id":78508,"status":"active","src_port":null,"dst_port":null,"detail":{"compression":"MPEG2","definition":"HD","bitrate":null,"program_id":1,"sdt_name":null,"compression":{"compression":"MPEG2","description":"MPEG2"},"definition":{"definition":"HD","description":"High Definition"},"ts_type":null},"routing_type":{"routing_type_id":1,"routing_type":"Multicast"}},{"link_id":66849,"cost":510,"src_node_id":81738,"dst_node_id":78501,"status":"active","src_port":null,"dst_port":null,"detail":{"compression":"MPEG2","definition":"HD","bitrate":null,"program_id":1,"sdt_name":null,"compression":{"compression":"MPEG2","description":"MPEG2"},"definition":{"definition":"HD","description":"High Definition"},"ts_type":null},"routing_type":{"routing_type_id":1,"routing_type":"Multicast"}},{"link_id":66850,"cost":30,"src_node_id":85166,"dst_node_id":70933,"status":"active","src_port":null,"dst_port":null,"detail":{"compression":"MPEG2","definition":"HD","bitrate":null,"program_id":1,"sdt_name":null,"compression":{"compression":"MPEG2","description":"MPEG2"},"definition":{"definition":"HD","description":"High Definition"},"ts_type":null},"routing_type":{"routing_type_id":1,"routing_type":"Multicast"}},{"link_id":69244,"cost":510,"src_node_id":81738,"dst_node_id":74990,"status":"active","src_port":null,"dst_port":null,"detail":{"compression":"MPEG2","definition":"HD","bitrate":null,"program_id":1,"sdt_name":null,"compression":{"compression":"MPEG2","description":"MPEG2"},"definition":{"definition":"HD","description":"High Definition"},"ts_type":null},"routing_type":{"routing_type_id":1,"routing_type":"Multicast"}},{"link_id":69245,"cost":510,"src_node_id":81738,"dst_node_id":74933,"status":"active","src_port":null,"dst_port":null,"detail":{"compression":"MPEG2","definition":"HD","bitrate":null,"program_id":1,"sdt_name":null,"compression":{"compression":"MPEG2","description":"MPEG2"},"definition":{"definition":"HD","description":"High Definition"},"ts_type":null},"routing_type":{"routing_type_id":1,"routing_type":"Multicast"}},{"link_id":69246,"cost":500,"src_node_id":81739,"dst_node_id":74990,"status":"active","src_port":null,"dst_port":null,"detail":{"compression":"MPEG2","definition":"HD","bitrate":null,"program_id":1,"sdt_name":null,"compression":{"compression":"MPEG2","description":"MPEG2"},"definition":{"definition":"HD","description":"High Definition"},"ts_type":null},"routing_type":{"routing_type_id":1,"routing_type":"Multicast"}},{"link_id":69247,"cost":500,"src_node_id":81739,"dst_node_id":74933,"status":"active","src_port":null,"dst_port":null,"detail":{"compression":"MPEG2","definition":"HD","bitrate":null,"program_id":1,"sdt_name":null,"compression":{"compression":"MPEG2","description":"MPEG2"},"definition":{"definition":"HD","description":"High Definition"},"ts_type":null},"routing_type":{"routing_type_id":1,"routing_type":"Multicast"}}]}]}

    function sortResults(prop, asc) {
        json = json.sort(function(a, b) {
            if (asc) return (a[prop] > b[prop]) ? 1 : ((a[prop] < b[prop]) ? -1 : 0);
            else return (b[prop] > a[prop]) ? 1 : ((b[prop] < a[prop]) ? -1 : 0);
        });
        showResults();
    }

    //sortResults('cost', true);

    var nodes = null;
    var edges = null;
    var network = null;

    var DIR = 'img/refresh-cl/';
    var EDGE_LENGTH_MAIN = 350;
    var EDGE_LENGTH_SUB = 150;



    // Called when the Visualization API is loaded.
    function draw() {
      // Create a data table with nodes.
      nodes = [];

      // Create a data table with links.
      edges = [];
      $.each(json.data[0].nodes, function(i, item) {
          //graphJSON.nodes.push(item.node_id)
          var type = item.device || item.service;
          console.log(item)
          //var name = type.device_name || type.service_name;
          var name = type.device_roles || 'Multicast Group';
          var img = name
          var info = name
          if(name != 'Multicast Group') {
            if(name[0]) {
            name = name[0].device_role
            }
            else {
              name = 'none'
            }
            img = name
            info = type.device_name
          }
          else {
            img = name
            name = item.multicast_group.multicast

          }
          name = name.replace(' ', ' ');
          if(name != 'Packager') {
            name = name.replace(' ', ' ') + '\n('+info+')';
          }
          var obj = {id: item.node_id, label: name, image: DIR + img + '.png', title: info, shape: 'image'}
          nodes.push(obj);
      });

      $.each(json.data[0].links, function(i, item) {
          var arr = [item.src_node_id, item.dst_node_id]
          var color = 'black'
          var dashes = false
          if(item.status != 'active') {
            color = 'red'
            dashes = true
          }
          edges.push({from: item.src_node_id, to: item.dst_node_id, arrows:'to', color: color, dashes: dashes, length: EDGE_LENGTH_MAIN});
          //graphJSON.edges.push(arr)
          console.log(item);
      });

      // nodes.push({id: 1, label: 'Main', image: DIR + 'Network-Pipe-icon.png', shape: 'image'});
      // nodes.push({id: 2, label: 'Office', image: DIR + 'Network-Pipe-icon.png', shape: 'image'});
      // nodes.push({id: 3, label: 'Wireless', image: DIR + 'Network-Pipe-icon.png', shape: 'image'});
      // edges.push({from: 1, to: 2, length: EDGE_LENGTH_MAIN});
      // edges.push({from: 1, to: 3, length: EDGE_LENGTH_MAIN});

      // for (var i = 4; i <= 7; i++) {
      //   nodes.push({id: i, label: 'Computer', image: DIR + 'Hardware-My-Computer-3-icon.png', shape: 'image'});
      //   edges.push({from: 2, to: i, length: EDGE_LENGTH_SUB});
      // }

      // nodes.push({id: 101, label: 'Printer', image: DIR + 'Hardware-Printer-Blue-icon.png', shape: 'image'});
      // edges.push({from: 2, to: 101, length: EDGE_LENGTH_SUB});

      // nodes.push({id: 102, label: 'Laptop', image: DIR + 'Hardware-Laptop-1-icon.png', shape: 'image'});
      // edges.push({from: 3, to: 102, length: EDGE_LENGTH_SUB});

      // nodes.push({id: 103, label: 'network drive', image: DIR + 'Network-Drive-icon.png', shape: 'image'});
      // edges.push({from: 1, to: 103, length: EDGE_LENGTH_SUB});

      // nodes.push({id: 104, label: 'Internet', image: DIR + 'System-Firewall-2-icon.png', shape: 'image'});
      // edges.push({from: 1, to: 104, length: EDGE_LENGTH_SUB});

      // for (var i = 200; i <= 201; i++ ) {
      //   nodes.push({id: i, label: 'Smartphone', image: DIR + 'Hardware-My-PDA-02-icon.png', shape: 'image'});
      //   edges.push({from: 3, to: i, length: EDGE_LENGTH_SUB});
      // }

      // create a network
      var container = document.getElementById('mynetwork');
      var data = {
        nodes: nodes,
        edges: edges
      };
      var options = {
        configure: {
          filter: 'nodes,edges'
        },
        layout:{
        improvedLayout: true,
        randomSeed:16,
        hierarchical: { levelSeparation: 300,
                        sortMethod: 'directed',
                        direction: 'LR'
                    }},
        nodes: {
          size:32,
        color: {
            border: '#222222',
            background: '#666666'
          },
          font:{color:'#000'}
        },
        edges: {
          /*color: '#AC53C9'*/
        }
      };
      network = new vis.Network(container, data, options);
    }
  </script>

<body onload="draw()" style="margin:0px;">
<div id="mynetwork"></div>

</body>
</html>
